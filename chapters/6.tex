% !TEX encoding = UTF-8
% !TEX TS-program = pdflatex
% !TEX root = ../arsclassica.tex
% !TEX spellcheck = it-IT

%************************************************
\chapter{Esperimenti numerici}\label{cap:esperimenti}
%************************************************
Lo scopo di questo capitolo è presentare i risultati ottenuti dalla sperimentazione degli algoritmi di classificazione e apprendimento strutturale oggetto di questo lavoro di tesi (si vedano rispettivamente i~\vref{cap:ctbnc,cap:structurallearning}).

La generazione di dataset inerenti il traffico automobilistico è stata effettuata, come detto, tramite un software commerciale apposito, \acs{TSIS}, e una \acl{RTE}, \acsfont{Sensors} \acs{DLL}, sviluppata a tale fine. Per maggiori dettagli riguardanti questi strumenti si rimanda al \vref{cap:tsis-sensors}.

Questo capitolo è quindi articolato in due parti, una per ogni dataset su cui è stata effettuata la succitata sperimentazione. Ognuna di tali sezioni è a sua volta suddivisa in due sottosezioni: la prima finalizzata alla descrizione del modello \acs{TSIS} da cui è stato generato il dataset oggetto della sperimentazione e alla descrizione di tale dataset, e la seconda finalizzata alla presentazione dei risultati di tale sperimentazione.

Al fine di valutare l'accuratezza dei metodi predittivi sviluppati, la sperimentazione è stata eseguita utilizzando la tecnica chiamata \emph{\keyword{cross-validation}}. Tale metodologia di validazione è infatti pensata per accertare la capacità di generalizzazione di un modello statistico di tipo predittivo su un insieme di dati non conosciuto. Nello specifico, entrambe le sperimentazioni, e entrambi i metodi predittivi valutati (\ie{} classificazione e apprendimento strutturale), sono state condotte tramite una \emph{\keyword{$k$-fold}} \emph{\keyword{cross-validation}} con $k=10$.

\section{\Ds{1}}\label{sec:dataset-1}
Lo scopo di questa sezione è presentare il \ds{1} e i risultati di classificazione e apprendimento strutturale ottenuti utilizzando tale insieme di \emph{\keyword{dati completi}} come input.

\subsection{Modello TSIS}\label{subsec:tsis-simple-model}
Al fine di introdurre il \ds{1} è necessario presentare la rete stradale \acs{TSIS} e il relativo modello di simulazione \acs{CORSIM} da cui esso è stato generato.

La~\vref{fig:tsis-model-simple} mostra la rete stradale che compone il modello \acs{TSIS} oggetto di questa sottosezione.
\begin{figure}[H]
  	\centering
  	\includegraphics[max size={0.9\textwidth}{0.9\textheight}]{tsis-model-simple}%
  	\caption[Rete stradale relativa al \ds{1}]{Visualizzazione del file \acs{TNO} rappresentante la rete stradale da cui viene generato il \ds{1}. I sensori sono etichettati tramite degli indici numerici di colore giallo mentre i nodi sono etichettati tramite degli indici numerici di colore bianco.}
	\label{fig:tsis-model-simple}
\end{figure}
Tale figura evidenzia:
\begin{itemize}
	\item la disposizione dei sensori (indicati tramite degli indici numerici di colore giallo) utilizzati per il monitoraggio del passaggio dei veicoli
	\item le strade, tutte composte da $2$ corsie, e i nodi (indicati tramite degli indici numerici di colore bianco) da cui è composta la rete stradale
	\item i sensi di marcia delle corsie
\end{itemize}
Di seguito si riportano le ulteriori caratteristiche di tale rete stradale:
\begin{itemize}
	\item la larghezza delle corsie è \num{3.65} \si{\metre}
	\item la lunghezza della strada principale (\ie{} da nodo $01$ a nodo $05$) è \num{780} \si{\metre} mentre la lunghezza delle strade ad essa perpendicolari è pari a \num{300} \si{\metre}
	\item la dimensione dei sensori è \num{0.30} \si{\metre}, da cui consegue che la dimensione della zona sensibile (in tutte le direzioni) è \num{2.13} \si{\metre}
	\item la distanza dei sensori dal nodo più vicino è \num{6.5} \si{\metre}
\end{itemize}

Le intersezioni principali della rete stradale (\ie{} nodi con indici $02$, $03$ e $04$ nella~\vref{fig:tsis-model-simple}) sono controllate da semafori il cui ciclio di controllo dura $100$ secondi. La~\vref{fig:tsis-model-simple-controls} illustra la configurazione del piano semaforico per ogni intersezione controllata durante tutto il tempo di simulazione.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.75\columnwidth,keepaspectratio]{tsis-model-simple-controller}
	\caption[Piano semaforico relativo al \ds{1}]{Piano semaforico predefinito delle intersezioni $02$, $03$ e $04$ della rete stradale \acs{TSIS} relativa al \ds{1}.}
	\label{fig:tsis-model-simple-controls}
\end{figure}

Come anticipato, ogni strada che compone la rete stradale contiene, nei pressi dei nodi (sia che essi siano delle intersezioni, sia che essi siano dei nodi di ingresso o di transito), dei sensori finalizzati al rilevamento e tracciamento del passaggio dei veicoli: essi sono indicati nella~\vref{fig:tsis-model-simple} da indici numerici di colore giallo. La~\vref{tab:ds-1-sensors-indices} elenca il nome reale di tali sensori, utilizzato per la generazione del relativo dataset (a tal riguardo, un esempio di dataset è stata riportato nella~\autoref{subsec:sensors-dll-output}~\vpageref{subsec:sensors-dll-output}).
\begin{table}[htbp]%
	\centering%
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\# & Sensore  \\\otoprule
	$01$& D$212$\\
	$02$& D$121$\\
	$03$& D$272$\\
	$04$& D$721$\\
	$05$& D$392$\\
	$06$& D$931$\\
	$07$& D$4412$\\
	$08$& D$1141$\\
	$09$& D$452$\\
	$10$& D$541$\\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\# & Sensore  \\\otoprule
	$11$& D$4102$\\
	$12$& D$1041$\\
	$13$& D$382$\\
	$14$& D$831$\\
	$15$& D$262$\\
	$16$& D$621$\\
	$17$& D$211$\\
	$18$& D$122$\\
	$19$& D$271$\\
	$20$& D$722$\\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\# & Sensore  \\\otoprule
	$21$& D$231$\\
	$22$& D$322$\\
	$23$& D$261$\\
	$24$& D$622$\\
	$25$& D$321$\\
	$26$& D$232$\\
	$27$& D$391$\\
	$28$& D$932$\\
	$29$& D$341$\\
	$30$& D$432$\\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\# & Sensore  \\\otoprule
	$31$& D$381$\\
	$32$& D$832$\\
	$33$& D$431$\\
	$34$& D$342$\\
	$35$& D$4111$\\
	$36$& D$1142$\\
	$37$& D$451$\\
	$38$& D$542$\\
	$39$& D$4101$\\
	$40$& D$1042$\\\bottomrule
	\end{tabular}
	\caption[Sensori del \ds{1}]{Corrispondenza fra gli identificatori dei sensori del \ds{1} e l'indice con cui essi sono indicati nella~\autoref{fig:tsis-model-simple}.}
	\label{tab:ds-1-sensors-indices}
\end{table}

Il modello di simulazione \acs{CORSIM} creato per questa rete stradale prevede un tempo di simulazione totale pari a $24$ ore, suddiviso in $16$ \emph{\keyword{time period}}, ognuno dei quali composto da \emph{\keyword{time interval}} della durata di $1$ secondo: la~\vref{tab:ds-1-tp-labels} illustra la durata (in ore) di ognuno di essi e introduce la corrispondenza fra essi e la fase della giornata, rappresentata come la variabile classe nel relativo dataset.
\begin{table}[htbp]%
	\centering%
	\begin{tabular}{+l^l^l^l}
	\toprule\rowstyle{\bfseries}%
	Fascia oraria  		   & Time Period  	& Fase          & Classe  \\\otoprule
	$07$:$00$ - $08$:$00$  & $1$            & mattino       & $1$     \\
	$08$:$00$ - $09$:$00$  & $2$            & mattino       & $1$     \\
	$09$:$00$ - $10$:$00$  & $3$            & mattino       & $1$     \\
	$10$:$00$ - $12$:$00$  & $4$            & giorno        & $2$     \\
	$12$:$00$ - $14$:$00$  & $5$            & giorno        & $2$     \\
	$14$:$00$ - $16$:$00$  & $6$            & giorno        & $2$     \\
	$16$:$00$ - $17$:$00$  & $7$            & giorno        & $2$     \\
	$17$:$00$ - $18$:$00$  & $8$            & pomeriggio    & $3$     \\
	$18$:$00$ - $19$:$00$  & $9$            & pomeriggio    & $3$     \\
	$19$:$00$ - $20$:$00$  & $10$           & pomeriggio    & $3$     \\
	$20$:$00$ - $22$:$00$  & $11$           & sera          & $4$     \\
	$22$:$00$ - $24$:$00$  & $12$           & sera          & $4$     \\
	$00$:$00$ - $02$:$00$  & $13$           & notte         & $5$     \\
	$02$:$00$ - $04$:$00$  & $14$           & notte         & $5$     \\
	$04$:$00$ - $05$:$00$  & $11$           & notte         & $5$     \\
	$05$:$00$ - $07$:$00$  & $16$           & alba          & $6$     \\\bottomrule
	\end{tabular}
	\caption[Periodi temporali relativi al \ds{1}]{Caratterizzazione dei periodi temporali (\ie{} \emph{\keyword{time period}}) del modello \acs{TSIS} relativo al \ds{1}.}
	\label{tab:ds-1-tp-labels}
\end{table}

Ogni fase della giornata (\ie{} classe) è caratterizzata da un andamento diverso del traffico:
\begin{itemize}
	\item al mattino traffico intenso su tutta la rete stradale e code in direzione del nodo $05$
	\item durante il giorno traffico moderato su tutta la rete e code residue verso il nodo $05$ nella prima parte di tale fase
	\item nel pomeriggio traffico intenso su tutta la rete stradale e code in direzione del nodo $01$
	\item durante la sera traffico moderato su tutta la rete stradale e code residue verso il nodo $01$ nella prima parte di tale fase
	\item durante la notte pochi veicoli in tutte le direzioni
	\item all'alba aumento dei veicoli diretti verso il nodo $05$
\end{itemize}

L'andamento del traffico è modellato in \acs{CORSIM} variando i flussi di ingresso dei veicoli e le percentuali di svolta nelle varie intersezioni al variare dei periodi temporali o, in generale, delle fasi di simulazione previste. La~\vref{tab:ds-1-input-vehicles} illustra i flussi di ingresso nella rete stradale, espressi come numero di veicoli orari (\ie{} \si{vph}), per ogni fase della simulazione. Si osservi che l'immissione di veicoli sulla rete stradale avviene seguendo una distribuzione di probabilità di Erlang con parametro \emph{shape} pari a $2$.
\begin{table}[H]
	\centering
	\begin{tabular}{+l^c^c^c}
	\toprule\rowstyle{\bfseries}%
	Fase 		& $01 \rightarrow 05$ & $05 \rightarrow 01$ & Strade secondarie	\\
				& \si{vph}			  & \si{vph}			& \si{vph}			\\\otoprule
	mattino		& $600$ 			  & $200$			  	& $100$				\\
	giorno 		& $300$				  & $300$			    & $50$				\\
	pomeriggio	& $200$				  & $600$			    & $100$				\\
	sera 		& $100$				  & $200$			    & $50$				\\
	notte 		& $50$				  & $50$			    & $25$				\\
	alba		& $200$				  & $100$			    & $50$				\\\bottomrule
	\end{tabular}
	\caption[Flussi di ingresso relativi al \ds{1}]{Numero di veicoli orari immessi nella rete stradale del dataset \ds{1} al variare della fase di simulazione.}
	\label{tab:ds-1-input-vehicles}
\end{table}

La~\vref{tab:ds-1-turning-movs} illustra le percentuali di svolta al variare della fase di simulazione. L'intestazione di tale tabella indica i nodi di provenienza dei veicoli, il senso di marcia e le direzioni previste dall'intersezione che segue il nodo di partenza. Le celle invece indicano la distribuzione delle svolte effettuate dai veicoli nelle intersezioni.

Si consideri, ad esempio, la prima cella della~\autoref{tab:ds-1-turning-movs}: l'$80$\% dei veicoli provenienti dai nodi $01$, $02$ e $03$, giunti alle intersezioni che seguono tali nodi (\ie{} nodi $02$, $03$ e $04$, rispettivamente; si veda a tal riguardo la~\vref{fig:tsis-model-simple}), proseguono senza svoltare; il $10$\% dei veicoli provenienti dai nodi $01$, $02$ e $03$, invece, svolterà verso destra; idem verso sinistra.
\begin{table}[htbp]
	\centering\footnotesize
	\begin{tabular}{+l^c^c^c^c^c^c^c^c^c^c^c^c}
	\toprule\rowstyle{\bfseries}%
	Nodi & \multicolumn{3}{c}{$01$ - $02$ - $03$} & \multicolumn{3}{c}{$03$ - $04$ - $05$} & \multicolumn{3}{c}{$06$ - $08$ - $10$} & \multicolumn{3}{c}{$07$ - $09$ - $11$} \\
	& & $\longrightarrow$ &
	& & $\longleftarrow$  &
	& & $\longrightarrow$ &
	& & $\longleftarrow$  &\\
	& $\hookleftarrow$ & $\hookrightarrow$ & $\downarrow$
	& $\hookleftarrow$ & $\hookrightarrow$ & $\downarrow$
	& $\searrow$ & $\hookrightarrow$ & $\downarrow$
	& $\nwarrow$ & $\hookrightarrow$ & $\downarrow$\\
	& & \% &
	& & \% &
	& & \% &
	& & \% &\\\otoprule
	mattino 	& $10$ & $10$ & $80$ & $20$ & $20$ & $60$ & $80$ & $10$ & $10$ & $10$ & $80$ & $10$ \\
	giorno  	& $20$ & $20$ & $60$ & $20$ & $20$ & $60$ & $60$ & $20$ & $20$ & $20$ & $60$ & $20$ \\
	pomeriggio 	& $20$ & $20$ & $60$ & $10$ & $10$ & $80$ & $10$ & $80$ & $10$ & $80$ & $10$ & $10$ \\
	sera 		& $40$ & $40$ & $20$ & $10$ & $10$ & $80$ & $30$ & $40$ & $30$ & $40$ & $30$ & $30$ \\
	notte 		& $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ & $33$ \\
	alba 		& $10$ & $10$ & $80$ & $40$ & $40$ & $20$ & $40$ & $30$ & $30$ & $30$ & $40$ & $30$ \\\bottomrule
	\end{tabular}
	\caption[Percentuali di svolta relative al \ds{1}]{Percentuali di svolta dei veicoli per ogni intersezione della rete stradale del \ds{1}, al variare della fase di simulazione.}
	\label{tab:ds-1-turning-movs}
\end{table}

Come detto nella~\autoref{subsec:sensors-dll}~\vpageref{subsec:sensors-dll}, eseguendo il modello di simulazione \acs{CORSIM} descritto in questa sezione con \acsfont{Sensors} \acs{DLL} si ottiene un file di output (si veda il listato d'esempio \ref{lst:sensors-out-format} \vpageref{lst:sensors-out-format}) che, adeguatamente processato, compone un dataset sottoponibile agli algoritmi di apprendimento e classificazione presentati nei capitoli~\ref{cap:ctbnc} e \ref{cap:structurallearning}.

Di seguito si descrivono le caratteristiche di tale dataset:
\begin{itemize}
	\item tempo totale pari a $86400$ secondi (\ie{} $24$ ore)
	\item suddivisione in $864$ elementi (\ie{} file)
	\item ogni elemento include $100$ secondi di traiettorie di ogni sensore della succitata rete stradale
	\item ogni elemento è stato ottimizzato, cioè sottoposto all'eliminazione delle righe in cui non si verifica alcuna transizione di stato dei sensori
	\item la colonna \lstinline[]|tp| è stata rimossa e sostituita con la colonna \lstinline[]|class| in base alla corrispondenza riportata nella \vref{tab:ds-1-tp-labels}
	\item l'intestazione di ogni elemento è: \\ \lstinline[]|time, class, D122, D121, D341, D342, D722, D721, D1142, D1141, D231, D232, D541, D542, D4112, D4111, D431, |\\\lstinline[]|D432, D4101, D4102, D451, D452, D832, D831, D261, D262, D321, D322, D392, D391, D211, D212, D272, D271, D1042, |\\\lstinline[]|D1041, D622, D621, D932, D931, D381, D382|.
\end{itemize}

\subsection{Risultati}
%configurazione fold
%configurazione imaginary counts and time

\section{\Ds{2}}\label{sec:dataset-2}
Lo scopo di questa sezione è presentare il \ds{1} e i risultati di classificazione e apprendimento strutturale ottenuti utilizzando tale insieme di \emph{\keyword{dati completi}} come input. A tale scopo, nella sottosezione che segue, si descrive la rete stradale \acs{TSIS} e il relativo modello di simulazione \acs{CORSIM} da cui tale dataset è stato generato.

\subsection{Modello TSIS}\label{subsec:tsis-monza-model}
Il modello \acs{TSIS} in questione, a differenza di quello presentato nella \autoref{subsec:tsis-simple-model}, riproduce una rete stradale reale. Nello specifico esso riproduce la rete stradale circostante \emph{Viale Cesare Battisti} ($20900$ \emph{Monza, MB - Italia}). Disponendo di una serie di informazioni reali, tra cui i dati dei sensori posti su tale rete stradale, si sono potute inferire le caratteristiche della circolazione dei veicoli (\eg{} flusso di veicoli in ingresso) e quindi riprodurre fedelmente l'andamento del traffico durante tutti i giorni della settimana tramite degli adeguati modelli di simulazione \acs{CORSIM}. Nello specifico si sono realizzati $3$ modelli \acs{CORSIM}: essi rappresentano la stessa rete stradale ma diversi modelli di traffico, uno per i giorni lavorativi (dal lunedì al venerdì), uno per il sabato e uno per la domenica.

La~\vref{fig:tsis-model-monza-nodes} illustra la rete stradale oggetto di studio, evidenziando e identificando i nodi e i collegamenti stradali utilizzati per la sua riproduzione in \acs{TSIS}.
\begin{figure}
  \centering
  \captionsetup[subfigure]{labelformat=empty}
  \subfloat[][]{\includegraphics[width=0.935\columnwidth]{tsis-model-monza-gmap-dx}}%
  \phantomcaption
  \label{fig:tsis-model-monza-nodes}
\end{figure}
\begin{figure}
  \centering
  \captionsetup{type=figure}
  \captionsetup[subfigure]{labelformat=empty}
  \subfloat[][]{\includegraphics[width=0.935\columnwidth]{tsis-model-monza-gmap-sx}}%
  \caption[Intersezioni della rete stradale del \ds{2}]{Visualizzazione del file \acs{TNO} rappresentante le intersezioni della rete stradale da cui viene generato il \ds{2}.}
\end{figure}

La~\vref{tab:ds-2-nodes} illustra la correlazione tra gli indici dei nodi \acs{CORSIM} e ciò che essi rappresentano nel modello in questione.
\begin{table}[htbp]%
	\centering%
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	Nodo/i    			& Descrizione											\\\otoprule
	$01$     			& Intersezione \emph{Battisti - Rossini - Alighieri}    \\
	$02$     			& Intersezione \emph{Battisti - Brianza - Margherita}   \\
	$03$     			& Nodo di ingresso da \emph{Viale Brianza}         		\\
	$04$ - $05$ - $06$ 	& Intersezione \emph{Boccaccio - Margherita}         	\\
	$08$     			& Intersezione \emph{Battisti - Boito - Tognetti}       \\
	$09$     			& Intersezione \emph{Battisti - Donizzetti - Volta}     \\
	$10$    			& Nodo di ingresso da \emph{Via Alighieri}			    \\
	$11$    			& Nodo di ingresso da \emph{Via Rossini}			    \\
	$12$    			& Nodo di ingresso da \emph{Via Donizzetti}			    \\
	$13$    			& Nodo di uscita da \emph{Via Volta}			  		\\
	$14$    			& Nodo di ingresso da \emph{Via Tognetti}			    \\
	$15$ 				& Nodo di ingresso da \emph{Via Boito}			    	\\
	$07$ - $16$ 		& Diramazione \emph{Boito - Battisti}            		\\
	$17$				& Nodo di ingresso da \emph{Viale Battisti}			    \\
	$18$				& Nodo di ingresso da \emph{Via Boccaccio}			    \\
	$19$				& Nodo di ingresso da \emph{Viale Margherita} 	 		\\\bottomrule
	\end{tabular}
	\caption[Intersezioni relative al \ds{2}]{Caratterizzazione degli identificatori delle intersezioni (o nodi) del \ds{2}.}
	\label{tab:ds-2-nodes}
\end{table}

Tutte le intersezioni della rete stradale (\ie{} nodi con indici $01$, $02$, $04$, $05$, $06$, $07$, $08$, $09$ nella \autoref{tab:ds-2-nodes}) sono controllate da semafori la cui configurazione riproduce i piani semaforici reali.

La rete stradale in questione, oltre a riprodurre i sensori realmente esistenti, contiene nei pressi di ognuna delle succitate intersezioni degli ulteriori sensori per la rilevazione del passaggio dei veicoli. Tutti i sensori sono posti su una sola corsia cosicché il flusso di dati da essi generato sia associabile alla canalizzazione della relativa corsia. Di seguito si elencano le informazioni relative ai sensori reali del modello in questione:
\begin{description}
\item[$5094$] \hfill \\
Posto nei pressi dell'intersezione $06$ (\ie{} \emph{Boccaccio - Margherita}), rileva i veicoli provenienti dal nodo $19$ (\ie{} corsia sinistra di \emph{Viale Margherita}) diretti verso l'intersezione $02$ (\ie{} \emph{Battisti - Brianza - Margherita}).
\item[$5095$] \hfill \\
Posto nei pressi dell'intersezione $06$ (\ie{} \emph{Boccaccio - Margherita}), rileva i veicoli provenienti dal nodo $18$ (\ie{} corsia sinistra \emph{Via Boccaccio}) che svoltano in diagonale a sinistra su \emph{Viale Margherita}.
\item[$5096$] \hfill \\
Posto nei pressi dell'intersezione $02$ (\ie{} \emph{Battisti - Brianza - Margherita}), rileva i veicoli provenienti dal nodo $03$ (\ie{} corsia sinistra di \emph{Viale Brianza}) diretti verso il nodo $04$ (\ie{} \emph{Boccaccio - Margherita}).
\item[$5097$] \hfill \\
Posto nei pressi dell'intersezione $02$ (\ie{} \emph{Battisti - Brianza - Margherita}), rileva i veicoli su \emph{Viale Margherita} (corsia sinistra) che svoltano a sinistra su \emph{Viale Battisti}.
\item[$5098$] \hfill \\
Posto nei pressi dell'intersezione $02$ (\ie{} \emph{Battisti - Brianza - Margherita}), rileva i veicoli su \emph{Viale Battisti} (corsia sinistra) che svoltano in diagonale a sinistra su \emph{Viale Brianza}.
\item[$5099$] \hfill \\
Posto nei pressi dell'intersezione $02$ (\ie{} \emph{Battisti - Brianza - Margherita}), rileva i veicoli su \emph{Viale Battisti} (corsia destra) che svoltano a destra in \emph{Viale Margherita}.
\end{description}
I sensori aggiunti alla rete stradale sono identificati secondo uno schema ben preciso. Il loro identificatore è composto in base al senso di marcia. Nello specifico tale numero è una concatenazione dei seguenti valori: identificatore del nodo di partenza, identificatore del nodo d'arrivo, numero indicante la corsia su cui il sensore è posto (\ie{} $0$ se è la strada possiede una sola corsia, $1$ o $2$ se il sensore è posto rispettivamente a destra o a sinitra, $7$ o $8$ nel caso in cui esso sia posto su ulteriori corsie di destra o sinistra). Ad esempio:
\begin{itemize}
\item il sensore identificato da D$912$ è posto sulla corsia di sinistra della strada che collega l'intersezione \virgolette{Volta} (\ie{} nodo $09$) all'intersezione \virgolette{Dante} (\ie{} nodo $01$)
\item il sensore identificato da D$1480$ è posto sull'unica corsia di \virgolette{Via Tognetti} (\ie{} nodo $14$) nei pressi dell'incrocio con l'intersezione \virgolette{Boito} (\ie{} nodo $08$).
\end{itemize}
\begin{table}[htbp]%
	\centering%
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\#  & Sensore \\\otoprule
	$01$& D$782$       \\
	$02$& D$781$       \\
	$03$& D$1687$      \\
	$04$& D$1681$      \\
	$05$& D$1682$      \\
	$06$& D$981$       \\
	$07$& D$982$       \\
	$08$& D$1480$      \\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\#  & Sensore \\\otoprule
	$09$& D$892$       \\
	$10$& D$891$       \\
	$11$& D$192$       \\
	$12$& D$191$       \\
	$13$& D$1290$      \\
	$14$& D$912$       \\
	$15$& D$911$       \\
	$16$& D$1092$      \\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\#  & Sensore \\\otoprule
	$17$& D$1091$      \\
	$18$& D$212$       \\
	$19$& D$211$       \\
	$20$& D$110$       \\
	\color{red}$21$& D$5098*$     \\
	\color{red}$22$& D$5099*$     \\
	\color{red}$23$& D$5097*$     \\
	$24$& D$421$       \\\bottomrule
	\end{tabular}
	\hspace{-0.6em}
	\begin{tabular}{+l^l}
	\toprule\rowstyle{\bfseries}%
	\#  & Sensore \\\otoprule
	\color{red}$25$& D$5096*$     \\
	$26$& D$321$       \\
	$27$& D$241$       \\
	$28$& D$242$       \\
	\color{red}$29$& D$5094*$     \\
	$30$& D$642$       \\
	\color{red}$31$& D$5095*$     \\
	$32$& D$541$       \\\bottomrule
	\end{tabular}
	\caption[Sensori relativi al \ds{2}]{Corrispondenza fra gli identificatori dei sensori del \ds{2} e l'indice con cui essi sono indicati nella \omissis{}}
	\label{tab:ds-2-sensors-indices}
\end{table}
Nella~\vref{tab:ds-2-sensors-indices}, i sensori il cui identificatore è contrassegnato da un asterisco corrispondono ai sensori reali, evidenziati anche nella \vref{fig:tsis-model-monza} tramite un indice numerico di colore rosso, mentre gli altri sensori sono quelli aggiunti per estendere il modello in questione.

% TODO: inserire nomi vie visibili
\begin{figure}[ht]
  	\centering
  	\includegraphics[width=1\columnwidth]{tsis-model-monza-compact}%
  	\caption[Rete stradale relativa al \ds{2}]{Visualizzazione del file \acs{TNO} rappresentante la rete stradale da cui viene generato il \ds{2}.}
	\label{fig:tsis-model-monza}
\end{figure}

Di seguito si riportano le ulteriori caratteristiche di tale rete stradale:
\begin{itemize}
	\item la larghezza delle corsie è \num{3.65} \si{\metre}
	\item le strade del modello \acs{TSIS} riproducono esattamente, sia in lunghezza che in forma, la porzione di strada reale che modellano:
	\begin{itemize}
		\item \emph{Viale Battisti} è lungo \num{1.33} \si{\kilo\metre}
		\item \emph{Via Boito} è lunga \num{308} \si{\metre}
		\item \emph{Via Tognetti} è lunga \num{351} \si{\metre}
		\item \emph{Via Donizzetti} è lunga \num{176} \si{\metre}
		\item \emph{Via Volta} è lunga \num{395} \si{\metre}
		\item \emph{Via Rossini} è lunga \num{141} \si{\metre}
		\item \emph{Via Dante} è lunga \num{422} \si{\metre}
		\item \emph{Viale Brianza} è lungo \num{106} \si{\metre}
		\item \emph{Viale Margherita} è lungo \num{505} \si{\metre}
		\item \emph{Via Boccaccio} è lunga \num{336} \si{\metre}
	\end{itemize}
	\item la dimensione dei sensori è \num{0.03} \si{\metre}, da cui consegue che la dimensione della zona sensibile (in tutte le direzioni) è \num{1.85} \si{\metre}
	\item la distanza dei sensori dall'intersezione più vicina è \num{6.5} \si{\metre}
	\item la velocità media dei veicoli: \num{67} \si{km/h} su \emph{Viale Battisti}, \num{56} \si{km/h} sulle altre strade.
\end{itemize}

Come anticipato, per questo caso di studio si sono creati $3$ modelli di simulazione differenti (corrispondenti quindi a $3$ differenti sorgenti \acs{TRF}), al fine di rappresentare i diversi flussi di traffico durante la settimana.

Il file \acs{TRF} creato per modellare il traffico sulla rete stradale nei giorni lavorativi prevede un tempo di simulazione totale pari a $24$ ore, suddiviso in $12$ \emph{time period}, ognuno dei quali composto da \emph{time interval} della durata di $100$ secondi: la \vref{tab:ds-2-tp-labels} illustra la durata (in ore) di ognuno di essi e introduce la corrispondenza fra essi e la fase della giornata, rappresentata come la variabile classe nel relativo dataset.

Nei modelli di traffico relativi al sabato e alla domenica la corrispondenza tra i \emph{time period}, che rimangono identici a quelli mostrati nella tabella \vref{tab:ds-2-tp-labels}, e la variable classe è differente. Ad esempio, il \emph{time period} $1$ del modello di traffico relativo al sabato è stato associato alla classe $11$ mentre il \emph{time period} $1$ del modello di traffico relativo alla domenica è stato associato alla classe $21$. Ne deriva che gli identificatori della variabile classe per questi due modelli di traffico sono incrementati di una e due decine rispetto agli identificatori usati per il modello di traffico relativo ai giorni lavorativi.
\begin{table}[htbp]%
	\centering%
	\begin{tabular}{+l^l^l^l}
	\toprule\rowstyle{\bfseries}%
	Fascia oraria  		   & Time Period  	& Fase          & Classe  \\\otoprule
	$00$:$00$ - $02$:$05$  & $1$            & notte         & $1$     \\
	$02$:$05$ - $04$:$10$  & $2$            & notte         & $1$     \\
	$04$:$10$ - $06$:$15$  & $3$            & alba          & $2$     \\
	$06$:$15$ - $08$:$20$  & $4$            & mattino       & $3$     \\
	$08$:$20$ - $10$:$25$  & $5$            & mattino       & $3$     \\
	$10$:$25$ - $12$:$30$  & $6$            & giorno        & $4$     \\
	$12$:$30$ - $14$:$35$  & $7$            & giorno        & $4$     \\
	$14$:$35$ - $16$:$40$  & $8$            & giorno        & $4$     \\
	$16$:$40$ - $18$:$45$  & $9$            & pomeriggio    & $5$     \\
	$18$:$45$ - $20$:$50$  & $10$           & pomeriggio    & $5$     \\
	$20$:$50$ - $22$:$55$  & $11$           & sera          & $6$     \\
	$22$:$55$ - $24$:$00$  & $12$           & sera          & $6$     \\\bottomrule
	\end{tabular}
	\caption[Periodi temporali del \ds{2}]{Caratterizzazione dei periodi temporali (\ie{} \emph{\keyword{time period}}) del modello \acs{TSIS} relativo al \ds{2} (giorni lavorativi).}
	\label{tab:ds-2-tp-labels}
\end{table}

Ogni fase della giornata (\ie{} classe) è caratterizzata da un andamento diverso del traffico. Di seguito si presenta l'andamento generale del traffico durante i giorni lavorativi:
\begin{itemize}
	\item al mattino (\ie{} periodi temporali $4$ e $5$) traffico diretto verso il centro di \emph{Monza}, prevalentemente da \emph{Viale Battisti} (\ie{} nodo di ingresso $17$) e, in misura minore, da \emph{Viale Monza} (\ie{} nodo di ingresso $03$)
	\item durante il giorno (\ie{} periodi temporali $6$, $7$ e $8$) incremento del traffico verso il centro di \emph{Monza}, soprattutto da \emph{Viale Battisti}, e incremento del traffico fra \emph{Viale Boccaccio} e \emph{Viale Margherita} (\ie{} nodi $18$ e $19$)
	\item durante il pomeriggio (\ie{} periodi temporali $9$ e $10$) il flusso dei veicoli inizia a invertire la sua direzione verso \emph{Viale Battisti}; aumento del numero di veicoli diretti verso le strade laterali (\eg{} \emph{Via Donizzetti}, \emph{Via Alighieri}, \emph{Via Rossini})
	\item alla sera (\ie{} periodi temporali $11$ e $12$) traffico proveniente dal centro di \emph{Monza} diretto verso \emph{Viale Battisti} e, al contempo, diminuizione dei veicoli provenienti da \emph{Viale Brianza}
	\item durante la notte (\ie{} periodi temporali $1$ e $2$) riduzione del traffico su tutta la rete
	\item all'alba (\ie{} periodo temporale $3$) pochi veicoli circolanti sulla rete stradale, prevalentemente su \emph{Viale Battisti} dove si verifica un leggero incremento dei veicoli in ingresso.
\end{itemize}

Come detto, l'andamento del traffico è modellato variando i flussi di ingresso. La \vref{tab:ds-2-input-vehicles} illustra il numero di veicoli orari (\ie{} \si{vph}) in ingresso sulla rete stradale in relazione a ogni periodo temporale del modello di simulazione. Anche per i modelli di simulazione \acs{CORSIM} relativi a questa rete stradale si è scelto di utilizzare una distribuzione di probabilità di Erlang per governare l'immissione dei veicoli sulla rete stradale.
\begin{table}
	\centering
	\begin{tabular}{+l^c^c^c^c^c^c^c^c}
	\toprule\rowstyle{\bfseries}%
	Time Period	& $19$		& $18$		& $17$		& $15$		& $14$		& $12$		& $11, 10$  & $03$		\\
				& \si{vph}	& \si{vph}	& \si{vph}	& \si{vph}	& \si{vph}	& \si{vph}  & \si{vph}	& \si{vph}	\\\otoprule
	$1$			& $150$ 	& $275$		& $375$		& $5$ 		& $5$ 		& $5$ 		& $5$ 		& $205$ 	\\
	$2$			& $25$ 		& $80$		& $105$		& $5$ 		& $5$ 		& $5$ 		& $5$ 		& $70$ 		\\
	$3$			& $96$ 		& $70$		& $325$		& $5$ 		& $5$ 		& $5$ 		& $5$ 		& $113$ 	\\
	$4$			& $350$ 	& $450$		& $1950$	& $20$ 		& $50$ 		& $20$ 		& $20$ 		& $1080$ 	\\
	$5$			& $500$ 	& $600$		& $1855$	& $20$ 		& $20$ 		& $20$ 		& $20$ 		& $1325$ 	\\
	$6$			& $750$ 	& $500$		& $2100$	& $20$ 		& $20$ 		& $20$ 		& $20$ 		& $1022$ 	\\
	$7$			& $600$ 	& $400$		& $1950$	& $20$ 		& $20$ 		& $20$ 		& $20$ 		& $1000$ 	\\
	$8$			& $700$  	& $600$		& $2390$	& $20$ 		& $20$ 		& $20$ 		& $20$ 		& $1050$ 	\\
	$9$			& $700$ 	& $510$		& $2410$	& $20$ 		& $20$ 		& $20$ 		& $20$ 		& $1010$ 	\\
	$10$		& $700$ 	& $250$		& $2275$	& $20$ 		& $12$ 		& $20$ 		& $20$ 		& $980$ 	\\
	$11$		& $370$ 	& $190$		& $1565$	& $10$ 		& $10$ 		& $10$ 		& $10$ 		& $575$ 	\\
	$12$		& $400$ 	& $75$		& $975$		& $8$ 		& $8$ 		& $10$ 		& $7$ 		& $400$ 	\\\bottomrule
	\end{tabular}
	\caption[Flussi di ingresso relativi al \ds{2}]{Numero di veicoli orari immessi nella rete stradale del \ds{2} (giorni lavorativi) al variare del periodo temporale.}
	\label{tab:ds-2-input-vehicles}
\end{table}

Si osservi, inoltre, che al fine di definire il succitato andamento del traffico è stata attuata un'adeguata modellazione delle percentuali di svolta in ogni intersezione. Tuttavia, a causa della complessità del modello, non è possibile riportare le variazioni delle percentuali di svolta di ogni intersezione per ogni periodo temporale.

Per chiarezza si sottolinea infine che i profili di traffico del sabato e della domenica sono stati descritti con flussi di ingresso e percentuali di svolta di diversa entità rispetto a quelli appena descritti.

Eseguendo con \acsfont{Sensors} \acs{DLL} uno qualsiasi dei modelli di simulazione (\ie{} giorni lavorativi, sabato o domenica) relativi alla rete stradale presentata, si ottiene il relativo file di output che, processato tramite gli strumenti di supporto precedentemente introdotti (si veda la \vref{sec:dataset-tools}), compone un dataset utile alla classificazione dei profili di traffico.

Affinché i dataset in questione siano perfettamente riproducibili si sono utilizzati dei file \acs{RNS}\footnote{\acs{CORSIM} supporta l'utilizzo di file \acf{RNS} per la configurazione di alcuni aspetti della simulazione: numero di esecuzione e semi numerici da utilizzare per la generazione stocastica di eventi.}, semplici file di testo, opportunamente formattati, da cui \acs{CORSIM} legge il numero di esecuzioni da effettuare e i semi numerici\footnote{Il \emph{seed} è un numero utilizzato per inizializzare un generatore di numeri pseudo-casuali. Condividendo tale numero e utilizzando lo stesso generatore di numeri pseudo-casuali utilizzato da \acs{CORSIM} è possibile riprodurre la stessa identica simulazione su altre macchine.} relativi ad alcuni aspetti stocastici della simulazione (\eg{} incidenti, tipologia di guida dei conducenti).

Di seguito si riporta il file \acs{RNS} relativo al modello di traffico per i giorni lavorativi della corrente rete stradale.
\inputsourcecode[language=pseudo, numbers=none, caption={[Configurazione \acs{RNS} del \ds{2}]File \acs{RNS} che configura il numero di esecuzioni (\ie{} 5) e i semi numerici del modello di simulazione \acs{CORSIM} relativo alla rete stradale del \ds{2}.}, label=lst:model2-week-rns]{codes/monza-week-exte.rns}

Di seguito si descrivono le caratteristiche del dataset:
\begin{itemize}
	\item tempo totale pari a $86400$ secondi (\ie{} $24$ ore)
	\item suddivisione in $864$ elementi (\ie{} file)
	\item ogni elemento include $100$ secondi di traiettorie di ogni sensore della succitata rete stradale
	\item ogni elemento è stato ottimizzato, cioè sottoposto all'eliminazione delle righe in cui non si verifica alcuna transizione di stato dei sensori
	\item la colonna \lstinline[]|tp| è stata rimossa e sostituita con la colonna \lstinline[]|class| in base alla corrispondenza riportata nella \vref{tab:ds-2-tp-labels} (gli identificatori delle classi variano come detto per i profili di traffico relativi al sabato e alla domenica)
	\item l'intestazione di ogni elemento è: \\\lstinline[]|time, class, D5096, D341, D5098, D5099, D211, D212, |\\\lstinline[]|D241, D242, D5097, D421, D5095, D541, D5094, D641, |\\\lstinline[]|D891, D892, D981, D982, D911, D912, D191, D192, D1290, |\\\lstinline[]|D1682, D1681, D1687, D1110, D1091, D1092, D1480, D781, |\\\lstinline[]|D782|.
\end{itemize}
Si osservi come tali caratteristiche sono indipendenti dal profilo di traffico simulato. Le differenze tra i $3$ diversi modelli di traffico sviluppati si sostanziano, chiaramente, nel diverso andamento dei flussi di traffico sulla rete stradale, il ché porta a diversi dati di rilevazione da parte dei sensori; nel numero di esecuzioni della simulazione (\ie{} $5$ per i giorni lavorativi e $1$ per il sabato e la domenica) e nei valori assunti dalla colonna relativa alla classe di traffico.

\subsection{Risultati}
\omissis{}

%risultati:
%apprendimento
%classificazione (cross-validated)
%apprendimento strutturale (cross-validated)
